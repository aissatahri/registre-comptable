<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.MenuButton?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.SeparatorMenuItem?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Text?>

<BorderPane fx:id="rootPane" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.app.registre.controller.MenuController">

    <top>
        <StackPane fx:id="topBarStack">
            <HBox fx:id="topBar" alignment="CENTER_LEFT" spacing="12" styleClass="top-bar">
                <!-- Brand (logo + title) -->
                <HBox alignment="CENTER_LEFT" spacing="10" styleClass="brand">
                    <ImageView fitHeight="36" fitWidth="36" preserveRatio="true">
                        <Image url="@../images/icon.png" />
                    </ImageView>
                    <VBox>
                        <Text style="-fx-font-weight: bold; -fx-fill: white; -fx-font-size: 14;" text="Registre" />
                        <Text style="-fx-fill: #ecf0f1; -fx-font-size: 11;" text="Comptable" />
                    </VBox>
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="6">
                    <Button fx:id="btnDashboard" onAction="#showDashboard" styleClass="menu-button" text="ðŸ“Š Tableau de bord" />
                    <Button fx:id="btnRegistre" onAction="#showRegistre" styleClass="menu-button" text="ðŸ“‹ Registre des OP" />
                    <Button fx:id="btnRecap" onAction="#showRecap" styleClass="menu-button" text="ðŸ“Š RÃ©capitulatif" />
                    <Button fx:id="btnMois" onAction="#showMois" styleClass="menu-button" text="ðŸ“… Par Mois" />
                    <Button fx:id="btnRecherche" onAction="#showRechercheAvance" styleClass="menu-button" text="ðŸ”Ž Recherche avancÃ©e" />
                    <Button fx:id="btnInitialSolde" onAction="#showEditInitialSolde" styleClass="menu-button" text="ðŸ’° Solde initial" />
                    <Button fx:id="btnDesignations" onAction="#showDesignations" styleClass="menu-button" text="ðŸ“ DÃ©signations" />
                </HBox>

                <Region HBox.hgrow="ALWAYS" />

                <Separator orientation="VERTICAL" styleClass="top-separator" />

                <HBox alignment="CENTER_RIGHT" spacing="8">
                    <MenuButton fx:id="dbMenu" styleClass="menu-button" text="ðŸ—„ï¸ Base de donnÃ©es">
                        <items>
                            <MenuItem onAction="#handleChangeDatabase" text="Changer de base de donnÃ©es" />
                            <MenuItem onAction="#exportDatabase" text="Exporter la base de donnÃ©es" />
                        </items>
                    </MenuButton>
                    <MenuButton fx:id="userMenu" styleClass="user-name">
                        <graphic>
                            <ImageView fitHeight="20" fitWidth="20" preserveRatio="true">
                                <Image url="@../images/account.png" />
                            </ImageView>
                        </graphic>
                        <items>
                            <MenuItem onAction="#showProfileDialog" text="Profil" />
                            <MenuItem onAction="#showSettingsDialog" text="ParamÃ¨tres" />
                            <SeparatorMenuItem />
                            <MenuItem onAction="#showUserManagement" text="Gestion des utilisateurs" />
                            <SeparatorMenuItem />
                            <MenuItem onAction="#showAbout" text="Ã€ propos" />
                            <SeparatorMenuItem />
                            <MenuItem onAction="#handleLogout" text="DÃ©connexion" />
                        </items>
                    </MenuButton>
                </HBox>
            </HBox>
        </StackPane>
    </top>

    <center>
        <StackPane fx:id="contentArea">
            <VBox alignment="CENTER" spacing="20">
                <ImageView fitHeight="100" fitWidth="100">
                    <Image url="@../images/icon.png" />
                </ImageView>
                <Text style="-fx-font-size: 24; -fx-fill: #2c3e50;" text="SystÃ¨me de Gestion Comptable" />
                <Text style="-fx-font-size: 14; -fx-fill: #7f8c8d;" text="Bienvenue dans votre registre comptable digital" />
            </VBox>
        </StackPane>
    </center>

</BorderPane>
